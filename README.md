# ğŸ¶ Puppit - ë°˜ë ¤ë™ë¬¼ ìš©í’ˆ ì¤‘ê³ ê±°ë˜ í”Œë«í¼

Puppitì€ ë°˜ë ¤ë™ë¬¼ ìš©í’ˆì„ ì‚¬ê³ íŒ” ìˆ˜ ìˆëŠ” ì¤‘ê³ ê±°ë˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. ì‹¤ì‹œê°„ ì±„íŒ…, í¬ì¸íŠ¸ ê²°ì œ, ë¦¬ë·° ì‹œìŠ¤í…œ ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨

- [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
- [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
- [ì‹œì‘í•˜ê¸°](#ì‹œì‘í•˜ê¸°)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [API ë¬¸ì„œ](#api-ë¬¸ì„œ)
- [ë°°í¬](#ë°°í¬)

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

### ì‚¬ìš©ì ê´€ë¦¬
- íšŒì›ê°€ì… ë° ë¡œê·¸ì¸ (ì¼ë°˜ / ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸)
- í”„ë¡œí•„ ì´ë¯¸ì§€ ê´€ë¦¬ (AWS S3 ì—°ë™)
- ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° ë° ì¬ì„¤ì •
- íšŒì› íƒˆí‡´ (ì†Œí”„íŠ¸ ì‚­ì œ)

### ìƒí’ˆ ê´€ë¦¬
- ìƒí’ˆ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ (CRUD)
- ì´ë¯¸ì§€ ë‹¤ì¤‘ ì—…ë¡œë“œ (AWS S3)
- ì¹´í…Œê³ ë¦¬ë³„ ë¶„ë¥˜ (ì‚¬ë£Œ, ê°„ì‹, ì¥ë‚œê°, ì˜ë¥˜ ë“±)
- ì§€ì—­ë³„ í•„í„°ë§
- ìƒí’ˆ ìƒíƒœ ê´€ë¦¬ (íŒë§¤ì¤‘, ì˜ˆì•½ì¤‘, íŒë§¤ì™„ë£Œ)
- ì°œí•˜ê¸° ê¸°ëŠ¥

### ê²€ìƒ‰ ê¸°ëŠ¥
- í‚¤ì›Œë“œ ê²€ìƒ‰
- ì‹¤ì‹œê°„ ìë™ì™„ì„±
- ê²€ìƒ‰ ê¸°ë¡ ì €ì¥
- ì¹´í…Œê³ ë¦¬ë³„ ê²€ìƒ‰

### ì‹¤ì‹œê°„ ì±„íŒ…
- WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ ë©”ì‹œì§€
- ì±„íŒ…ë°© ìƒì„± ë° ê´€ë¦¬
- ì½ìŒ/ì•ˆì½ìŒ ìƒíƒœ í‘œì‹œ
- ì•Œë¦¼ ê¸°ëŠ¥
- ì±„íŒ…ë°© ì‚­ì œ

### ê±°ë˜ ë° ê²°ì œ
- í¬ì¸íŠ¸ ì¶©ì „ (IamPort ì—°ë™)
- í¬ì¸íŠ¸ ê¸°ë°˜ ìƒí’ˆ êµ¬ë§¤
- ê±°ë˜ ë‚´ì—­ ê´€ë¦¬
- ê±°ë˜ ìƒíƒœ ì¶”ì 

### ë¦¬ë·° ì‹œìŠ¤í…œ
- ê±°ë˜ í›„ ë¦¬ë·° ì‘ì„±
- ë³„ì  í‰ê°€ (1~5ì )
- íŒë§¤ìë³„ ë¦¬ë·° ì¡°íšŒ

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Java** 11
- **Spring Framework** 5.3.39
  - Spring MVC
  - Spring AOP
  - Spring JDBC
  - Spring WebSocket
- **MyBatis** 3.5.14
- **Lombok** 1.18.38

### Frontend
- **JSP** 2.3.3
- **JSTL** 1.2
- **JavaScript**
- **HTML5/CSS3**

### Database
- **MySQL** 8.0.33
- **HikariCP** 5.1.0 (Connection Pool)

### Infrastructure
- **Apache Tomcat** 9.0.109
- **Nginx** (Reverse Proxy)
- **AWS S3** (ì´ë¯¸ì§€ ì €ì¥ì†Œ)
- **Docker** (ì»¨í…Œì´ë„ˆí™”)

### External APIs
- **Kakao Login API** (ì†Œì…œ ë¡œê·¸ì¸)
- **IamPort** (ê²°ì œ ì‹œìŠ¤í…œ)

### Tools & Libraries
- **Maven** (ë¹Œë“œ ë„êµ¬)
- **SLF4J + Logback** (ë¡œê¹…)
- **Jackson** (JSON ì²˜ë¦¬)
- **Commons FileUpload** (íŒŒì¼ ì—…ë¡œë“œ)
- **Google Guava** (ìœ í‹¸ë¦¬í‹°)

## ğŸ— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚
â”‚  (Browser)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Nginx    â”‚ (Reverse Proxy, Port 80)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Tomcat    â”‚ (WAS, Port 8080)
â”‚ Spring MVC  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚   â”‚  MySQL   â”‚ (Database)
       â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  AWS S3  â”‚ (Image Storage)
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ ì‹œì‘í•˜ê¸°

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- Java 11 ì´ìƒ
- Maven 3.6 ì´ìƒ
- MySQL 8.0 ì´ìƒ
- Docker (ì„ íƒì‚¬í•­)

### ë¡œì»¬ í™˜ê²½ ì„¤ì •

1. **ì €ì¥ì†Œ í´ë¡ **
```bash
git clone https://github.com/choimeeyoung94/puppit.git
cd puppit
```

2. **ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •**
```bash
# MySQL ì ‘ì†
mysql -u root -p

# ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
CREATE DATABASE db_puppit CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# ìŠ¤í‚¤ë§ˆ ì ìš©
USE db_puppit;
source src/main/resources/SCHEMA.sql;
```

3. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**

`src/main/resources/application-secret.properties` íŒŒì¼ ìƒì„±:
```properties
# Database Configuration
db.url=jdbc:mysql://localhost:3306/db_puppit?useSSL=false&serverTimezone=Asia/Seoul
db.username=your_db_username
db.password=your_db_password

# AWS S3 Configuration
aws.s3.accessKey=your_aws_access_key
aws.s3.secretKey=your_aws_secret_key
aws.s3.bucketName=your_bucket_name
aws.s3.region=ap-northeast-2

# Kakao Login API
kakao.client.id=your_kakao_client_id
kakao.redirect.uri=http://localhost:8080/puppit/user/kakao/callback

# IamPort Configuration
iamport.key=your_iamport_key
iamport.secret=your_iamport_secret
```

4. **ë¹Œë“œ ë° ì‹¤í–‰**
```bash
# Maven ë¹Œë“œ
mvn clean package

# WAR íŒŒì¼ì„ Tomcatì— ë°°í¬
cp target/puppit-1.0.0.war $TOMCAT_HOME/webapps/puppit.war

# Tomcat ì‹œì‘
$TOMCAT_HOME/bin/startup.sh
```

5. **ì• í”Œë¦¬ì¼€ì´ì…˜ ì ‘ì†**
```
http://localhost:8080/puppit
```

### Dockerë¥¼ ì‚¬ìš©í•œ ì‹¤í–‰

```bash
# Docker ì´ë¯¸ì§€ ë¹Œë“œ
docker build -t puppit:latest .

# ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker run -d -p 80:80 -p 8080:8080 --name puppit-container puppit:latest

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì ‘ì†
http://localhost/puppit
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
puppit/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â””â”€â”€ org/puppit/
â”‚   â”‚   â”‚       â”œâ”€â”€ config/           # ì„¤ì • í´ë˜ìŠ¤
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ AwsS3Config.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ WebConfig.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ WebSocketConfig.java
â”‚   â”‚   â”‚       â”œâ”€â”€ controller/       # ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ProductController.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ UserController.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ChatController.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ OrderController.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚       â”œâ”€â”€ service/          # ì„œë¹„ìŠ¤ ë ˆì´ì–´
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ProductService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ UserService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ChatService.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚       â”œâ”€â”€ repository/       # DAO (MyBatis)
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ProductDAO.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ UserDAO.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚       â”œâ”€â”€ model/dto/        # DTO í´ë˜ìŠ¤
â”‚   â”‚   â”‚       â””â”€â”€ util/             # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ resources/
â”‚   â”‚   â”‚   â”œâ”€â”€ mybatis/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ mybatis-config.xml
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ mapper/           # MyBatis ë§¤í¼
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ productMapper.xml
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ userMapper.xml
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚   â”‚   â”œâ”€â”€ SCHEMA.sql            # DB ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”‚   â””â”€â”€ application-secret.properties
â”‚   â”‚   â””â”€â”€ webapp/
â”‚   â”‚       â”œâ”€â”€ WEB-INF/
â”‚   â”‚       â”‚   â”œâ”€â”€ views/            # JSP íŒŒì¼
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ product/
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ user/
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ chat/
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚       â”‚   â”œâ”€â”€ spring/
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ root-context.xml
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ appServlet/
â”‚   â”‚       â”‚   â”‚       â””â”€â”€ servlet-context.xml
â”‚   â”‚       â”‚   â””â”€â”€ web.xml
â”‚   â”‚       â””â”€â”€ resources/            # ì •ì  ë¦¬ì†ŒìŠ¤
â”‚   â”‚           â””â”€â”€ image/
â”‚   â””â”€â”€ test/
â”‚       â””â”€â”€ java/
â”œâ”€â”€ Dockerfile                        # Docker ì„¤ì •
â”œâ”€â”€ pom.xml                          # Maven ì„¤ì •
â””â”€â”€ README.md
```

## ğŸ“¡ API ë¬¸ì„œ

### ìƒí’ˆ API

#### ìƒí’ˆ ëª©ë¡ ì¡°íšŒ
- **GET** `/product/search`
- **Parameters**: `searchName` (ê²€ìƒ‰ í‚¤ì›Œë“œ)
- **Response**: JSON ë°°ì—´

#### ìƒí’ˆ ìƒì„¸ ì¡°íšŒ
- **GET** `/product/detail/{productId}`
- **Response**: ìƒí’ˆ ìƒì„¸ ì •ë³´ (JSP)

#### ìƒí’ˆ ë“±ë¡
- **POST** `/product/new`
- **Parameters**: 
  - `product` (ìƒí’ˆ ì •ë³´)
  - `imageFiles` (ì´ë¯¸ì§€ íŒŒì¼ë“¤)

#### ìƒí’ˆ ìˆ˜ì •
- **POST** `/product/update`
- **Parameters**: 
  - `product` (ìˆ˜ì •í•  ìƒí’ˆ ì •ë³´)
  - `imageFiles` (ìƒˆ ì´ë¯¸ì§€ íŒŒì¼ë“¤)
  - `deleteImageIds` (ì‚­ì œí•  ì´ë¯¸ì§€ IDë“¤)

#### ìƒí’ˆ ì‚­ì œ
- **POST** `/product/delete`
- **Parameters**: `productId`

### ì±„íŒ… API

#### ì±„íŒ…ë°© ìƒì„±/ì¡°íšŒ
- **GET** `/chat/createRoom`
- **Parameters**: 
  - `productId`
  - `buyerId`
  - `sellerId`

#### ë©”ì‹œì§€ ì¡°íšŒ
- **GET** `/chat/message`
- **Parameters**: 
  - `roomId`
  - `loginUserId`
- **Response**: JSON (ë©”ì‹œì§€ ëª©ë¡, ìƒí’ˆ ì •ë³´)

#### ì±„íŒ…ë°© ì‚­ì œ
- **POST** `/chat/removeroom`
- **Parameters**: `roomId`
- **Response**: JSON (ì„±ê³µ/ì‹¤íŒ¨)

### ê²°ì œ API

#### í¬ì¸íŠ¸ ì¶©ì „
- **POST** `/order/charge`
- **Parameters**: ê²°ì œ ì •ë³´

#### ìƒí’ˆ êµ¬ë§¤
- **POST** `/order/buy`
- **Parameters**: ìƒí’ˆ ì •ë³´, ê²°ì œ ì •ë³´

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### ì£¼ìš” í…Œì´ë¸”

- **user**: ì‚¬ìš©ì ì •ë³´
- **product**: ìƒí’ˆ ì •ë³´
- **product_image**: ìƒí’ˆ ì´ë¯¸ì§€
- **room**: ì±„íŒ…ë°©
- **chat**: ì±„íŒ… ë©”ì‹œì§€
- **alarm**: ì•Œë¦¼
- **trade_payment**: ê±°ë˜ ê²°ì œ ì •ë³´
- **point_charge**: í¬ì¸íŠ¸ ì¶©ì „ ë‚´ì—­
- **review**: ë¦¬ë·°
- **wishlist**: ì°œ ëª©ë¡
- **search_log**: ê²€ìƒ‰ ê¸°ë¡

ìì„¸í•œ ìŠ¤í‚¤ë§ˆëŠ” `src/main/resources/SCHEMA.sql` ì°¸ê³ 

## ğŸ” ë³´ì•ˆ

- ë¹„ë°€ë²ˆí˜¸: Salt + SHA-256 í•´ì‹±
- ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦
- XSS ë°©ì§€
- SQL Injection ë°©ì§€ (MyBatis PreparedStatement)
- CSRF í† í° (í•„ìš” ì‹œ ì¶”ê°€ êµ¬í˜„)

## ğŸ§ª í…ŒìŠ¤íŠ¸

```bash
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
mvn test

# í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰
mvn verify
```

## ğŸ“¦ ë°°í¬

### War íŒŒì¼ ìƒì„±
```bash
mvn clean package
```

ìƒì„±ëœ WAR íŒŒì¼: `target/puppit-1.0.0.war`

### Docker ì´ë¯¸ì§€ ë¹Œë“œ ë° ë°°í¬
```bash
# ì´ë¯¸ì§€ ë¹Œë“œ
docker build -t puppit:1.0.0 .

# Docker Hubì— í‘¸ì‹œ (ì„ íƒì‚¬í•­)
docker tag puppit:1.0.0 username/puppit:1.0.0
docker push username/puppit:1.0.0

# ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker run -d \
  -p 80:80 \
  -p 8080:8080 \
  --name puppit \
  puppit:1.0.0
```

### í”„ë¡œë•ì…˜ í™˜ê²½ ì„¤ì •

1. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**: ì‹¤ì œ ìš´ì˜ í™˜ê²½ì˜ DB, AWS S3 ì •ë³´ ì„¤ì •
2. **SSL ì¸ì¦ì„œ**: HTTPS ì ìš© ê¶Œì¥
3. **ë°©í™”ë²½ ì„¤ì •**: í•„ìš”í•œ í¬íŠ¸ë§Œ ê°œë°©
4. **ë¡œê·¸ ê´€ë¦¬**: Logback ì„¤ì •ì„ í†µí•œ ë¡œê·¸ ë ˆë²¨ ì¡°ì •
5. **ë°±ì—…**: ì •ê¸°ì ì¸ DB ë°±ì—… ì„¤ì •

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## ğŸ“ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ë¥¼ ë”°ë¦…ë‹ˆë‹¤.

## ğŸ‘¥ ê°œë°œíŒ€

- GitHub: [@choimeeyoung94](https://github.com/choimeeyoung94)

## ğŸ“ ë¬¸ì˜

í”„ë¡œì íŠ¸ ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì€ Issues íƒ­ì„ ì´ìš©í•´ì£¼ì„¸ìš”.

---

**Made with â¤ï¸ for Pet Lovers**

